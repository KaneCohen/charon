/**
 * Simple javascript Date manipulation, parsing and printing library.
 * version 0.2.0
 * Kane Cohen [KaneCohen@gmail.com] | https://github.com/KaneCohen
 * @preserve
 */
(function(a){"use strict";function b(a){return a.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"")}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a){return Math.abs(Math.round(a))}function e(b,c,d){var e=new String(b);for(d==a&&(d="0");e.length<c;)e=d+e;return e}function f(b,c,d){var e=new String(b);for(d==a&&(d="0");e.length<c;)e+=d;return e}function g(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function h(a,b,c){var d,e,f;return c||(c=!1),b=new Date(b),a._utcMode&&b.setMilliseconds(u),b.setHours(0,0,0),f=0===a.lang().week.weekStart?b.getDay():b.getDay()||7,c?(d=new Date(b.getFullYear(),0,1),b.setDate(b.getDate()+a.lang().week.yearStart-f),e=Math.floor((b-d+1)/6048e5)):(b.setDate(b.getDate()+a.lang().week.yearStart-f),d=new Date(b.getFullYear(),0,1),e=Math.ceil((b-d+1)/6048e5)),e}function i(a,b){return a._utcMode&&b.setMilliseconds(u),(b.getDay()+7-a.lang().week.weekStart)%7}function j(a,b){b=new Date(b),a._utcMode&&b.setMilliseconds(u);var c=b.getDate(),d=b.getFullYear(),e=new Date(d,0,1,12,0,0),f=new Date(d,b.getMonth(),c,12,0,0);return Math.round((f-e)/864e5)+1}function k(a,b){return new Date(b,a,0).getDate()}function l(a,b,c){return b instanceof Date?new Date(b):b instanceof r?new Date(b.toDate()):"string"==typeof b?q(a,b,c):"number"==typeof b?new Date(b):"array"==typeof b?q(a,b,c):new Date}function m(a){var b=a.match(A),c={format:[],regex:[],groups:[]};return b&&b.forEach(function(a,b){a=/\w+/.exec(a)[0],c.format[b]=a,c.regex[b]=G[a],c.groups[b]=z[a[0]]||null}),c}function n(a,b){var c=B.exec(b),d="",e=c.length;if(c[0]){for(s=0,e=C.dates.length;e>s;s++)if(C.dates[s][1].exec(b)){d=C.dates[s][0]+(c[6]||" ");break}for(s=0,e=C.times.length;e>s;s++)if(C.times[s][1].exec(b)){d+=C.times[s][0];break}}return b.match(D)&&(d+="{Z}"),o(a,b,d)}function o(a,b,c){var d=m(c);return p(a,b,d)}function p(a,b,c){var d,e,f,h,i,j,k=0,l=null,m=new Date;if(!c.format)return null;g(m);for(j in c.format)d=b.substr(k),h=d.match(c.regex[j]),h&&(f=h[0],e="set"+c.groups[j],k+=d.indexOf(f)+String(f).length,"setTimezone"==e?(i=f.match(E),l=60*i[1]*60+60*i[2],l="-"==i[0]?-l:l):("setMonth"==e&&f--,m[e](f)));return null!==l?new Date(m.getTime()-(u+60*l*1e3)):a._utcMode?new Date(m.getTime()-u):m}function q(a,b,c){return"undefined"==typeof c?n(a,b):o(a,b,c)}function r(a,b){c(this,x),this._d=l(this,a,b)}var s,t="undefined"!=typeof module&&module.exports,u=60*(new Date).getTimezoneOffset()*1e3,v={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},w={ms:"millisecond",milliseconds:"millisecond",seconds:"second",s:"second",minutes:"minute",m:"minute",hours:"hour",h:"hour",days:"day",d:"day",weeks:"week",w:"week",months:"month",M:"month",years:"year",y:"year",Y:"year"},x={_d:null,_utcMode:!1,_maxDiff:2592e3,_offset:u,_lang:"en"},y={en:{relativeTime:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"just now",minute:"{prefix} [a minute] {suffix}",minutes:"{prefix} {diff} [minutes] {suffix}",hour:"{prefix} [an hour] {suffix}",hours:"{prefix} {diff} [hours] {suffix}",day:"{prefix} [a day] {suffix}",days:"{prefix} {diff} [days] {suffix}",month:"{prefix} [a month] {suffix}",months:"{prefix} [months] {diff}",year:"{prefix} [a year] {suffix}",years:"{prefix} {diff} [years] {suffix}",wordDelimiter:" ",format:function(a,b){return a.year()===b.year()?"{D} {MMMM}":"{D} {MMMM} {YYYY}"}},pluralizer:function(a){return 1==a?0:1},calendar:{sameElse:"{D} {MMMM} {YYYY}",sameDay:"Today at {hh}:{mm}",nextDay:"Tomorrow at {hh}:{mm}",nextWeek:"{wwww} at {hh}:{mm}",lastDay:"Yesterday at {hh}:{mm}",lastWeek:"Last {wwww} at {hh}:{mm}"},week:{weekStart:0,yearStart:4},weekdays:function(a,b,c){c||(c=!1);var d={nominative:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Satruday","Sunday"],brief:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};return c?d.brief[a]:d.nominative[a]},months:function(a,b,c){c||(c=!1);var d={nominative:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],brief:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};return c?d.brief[a]:d.nominative[a]}}},z={S:"Milliseconds",s:"Seconds",m:"Minutes",H:"Hours",h:"Hours",D:"Date",M:"Month",Y:"FullYear",Z:"Timezone"},A=/{(\w+)}/gi,B=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,C={dates:[["{YYYY}-{MM}-{DD}",/\d{4}-\d{2}-\d{2}/],["{YYYY}-{DDD}",/\d{4}-\d{3}/]],times:[["{HH}:{mm}:{ss}",/(T| )\d\d:\d\d:\d\d/],["{HH}:{mm}",/(T| )\d\d:\d\d/],["{HH}",/(T| )\d\d/]]},D=/Z|[\+\-]\d\d:?\d\d/gi,E=/([\+\-]|\d\d)/gi,F="[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}",G={S:/\d{1,3}/,SS:/\d{3}/,s:/\d{1,2}/,ss:/\d{2}/,m:/\d{1,2}/,mm:/\d{2}/,H:/\d{1,2}/,HH:/\d{2}/,h:/\d{1,2}/,hh:/\d{2}/,a:/am|pm/,A:/AM|PM/,D:/\d{1,2}/,DD:/\d{2}/,DDD:/\d{1,3}/,DDDD:/\d{3}/,M:/\d{1,2}/,MM:/\d{2}/,MMM:/\w{2}/,MMMM:F,w:/\d{1}/,ww:/\d{2}/,www:F,wwww:F,W:/\d{1,2}/,WW:/\d{2}/,WWW:/\d{1,2}/,WWWW:/\d{2}/,Y:/\d{2}/,YY:/\d{2}/,YYYY:/\d{4}/,Z:/Z|[\+\-]\d\d:?\d\d/,ZZ:/Z|[\+\-]\d\d:?\d\d/};r.prototype={fromNow:function(a,b){a="undefined"==typeof a?new r:new r(a);var c=this.diff(a,"all"),d=c.relative,e=this.lang().relativeTime,f=c.strict.s<0?!0:!1;return d.s<this._maxDiff?d.s<45&&this.humanize(e.seconds,d.s,f)||d.s<90&&this.humanize(e.minute,1,f)||d.m<45&&this.humanize(e.minutes,d.m,f)||d.m<90&&this.humanize(e.hour,1,f)||d.h<24&&this.humanize(e.hours,d.h,f)||d.h<42&&this.humanize(e.day,1,f)||d.d<31&&this.humanize(e.days,d.d,f)||d.M<12&&this.humanize(e.months,d.m,f)||d.y<1.5&&this.humanize(e.year,d.y,f)||d.y>1.5&&this.humanize(e.years,d.y,f)||this.humanize(e.years,d.y,f):(b||(b=e.format),"function"==typeof b&&(b=b(this,a)),this.format(b))},diff:function(a,b,c){b=w[b]||b,"undefined"==typeof c&&(c=!0);var e,f=l(this,a),g=this._d.getTime()-f.getTime(),h=g/1e3,i=h/60,j=i/60,k=j/24,m=k/30,n=k/365;switch(b){case"second":e=h;break;case"minute":e=i;break;case"hour":e=j;break;case"day":e=k;break;case"month":e=m;break;case"year":e=n;break;case"all":return{relative:{S:d(g),s:d(h),m:d(i),h:d(j),d:d(k),M:d(m),y:d(n)},strict:{S:g,s:h,m:i,h:j,d:k,M:m,y:n}};default:e=g}return c?Math.abs(Math.round(e)):e},humanize:function(a,c,d){var e=this.lang().relativeTime;a=this.choice(a,c);var f=d?e.prefixAgo:e.prefixFromNow,g=d?e.suffixAgo:e.suffixFromNow,h=this.format(a.replace(/{diff}/i,c).replace(/{prefix}/i,f||"").replace(/{suffix}/i,g||""));return b(h)},choice:function(a,b){var c=a.match(/\[(.+)\]/);if(!c)return a;var d=c[1].split("|"),e=d.length>1?d[this.lang().pluralizer(b)]:d[0];return a=a.replace(c[0],e)},format:function(a){a||(a="{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}{Z}");var b=this,c=a,d=new Date(this._d),g=this.lang(),j=a.match(A);if(j){this._utcMode&&d.setMilliseconds(u),j.forEach(function(j){var k,l,m=/\w+/.exec(j)[0];if("Z"===m[0]){var n=b._utcMode?0:d.getTimezoneOffset(),o=n>0?"-":"+";o+=Math.abs(n)<6e3?"0":"",o=f(o+Math.abs(n/60),5)}var p;switch(m){case"S":p=d.getMilliseconds()/10;break;case"SS":p=d.getMilliseconds()/100;break;case"SSS":p=d.getMilliseconds();break;case"s":case"ss":p=d.getSeconds();break;case"m":case"mm":p=d.getMinutes();break;case"H":case"HH":var q=d.getHours(),r=q>11?q%12:q;p=String(0===r?12:r);break;case"h":case"hh":p=d.getHours();break;case"a":p=d.getHours()>11?"pm":"am";break;case"A":p=d.getHours()>11?"PM":"AM";break;case"D":case"DD":p=String(d.getDate());break;case"DDD":case"DDDD":p=String(b.dayOfYear());break;case"M":case"MM":p=String(d.getMonth()+1);break;case"MMM":p=g.months(d.getMonth()+1,a,!0);break;case"MMMM":p=g.months(d.getMonth()+1,a);break;case"w":case"ww":p=i(b,d);break;case"www":p=g.weekdays(weekday,a,!0);break;case"wwww":p=g.weekdays(weekday,a);break;case"W":case"WW":p=String(h(b,d));break;case"WWW":case"WWWW":p=String(h(b,d,!0));break;case"Y":case"YY":p=String(d.getFullYear()).substring(2);break;case"YYYY":p=String(d.getFullYear());break;case"Z":p=[o.slice(0,3),":",o.slice(3)].join("");break;case"ZZ":p=o}switch(m){case"SS":case"DDDD":p=e(p,3);break;case"ss":case"mm":case"HH":case"hh":case"DD":case"MM":case"ww":case"WW":case"WWW":p=e(p,2)}"function"==typeof a&&(a=a(p)||a),"string"==typeof a&&(k=c.slice(0,c.indexOf(j)),l=c.slice(c.indexOf(j)+j.length),c=k+p+l)})}return c},calendar:function(){var a=this.diff((new r).startOf("day"),"days",!1),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar[b])},startOf:function(a){switch(a){case"year":this._d.setMonth(0);case"month":this._d.setDate(1);case"week":case"day":this._d.setHours(0);case"hour":this._d.setMinutes(0);case"minute":this._d.setSeconds(0);case"second":this._d.setMilliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(1,a).sub(1,"ms")},add:function(a,b){return this._d.setMilliseconds(this._d.getMilliseconds()+this.duration(a,b)),this},sub:function(a,b){return this._d.setMilliseconds(this._d.getMilliseconds()-this.duration(a,b)),this},duration:function(a,b){return b||(b="ms"),a*(v[b]||v[w[b]])},isValid:function(){return!!this._d},parse:function(a,b){return this._d=l(this,a,b),this},get:function(a){a||(a="ms"),a=w[a]||a;var b=new Date(this._d);switch(this._utcMode&&"time"!==a&&b.setMilliseconds(u),a){case"millisecond":return b.getMilliseconds();case"second":return b.getSeconds();case"minute":return b.getMinutes();case"hour":return b.getHours();case"day":return b.getDay();case"date":return b.getDate();case"month":return b.getMonth();case"year":return b.getFullYear();default:return b.getTime()}return b.getTime()},now:function(){return this._d=new Date,this},timestamp:function(a){var b=this.get("time");return null==a?b:this.add(a-b,"ms")},unix:function(a){return null==a?Math.floor(this.timestamp()/1e3):this.timestamp(1e3*a)},milliseconds:function(a){var b=this.get("ms");return null==a?b:this.add(a-b,"ms")},ms:function(a){return this.milliseconds(a)},seconds:function(a){var b=this.get("s");return null==a?b:this.add(a-b,"s")},minutes:function(a){var b=this.get("m");return null==a?b:this.add(a-b,"m")},hours:function(a){var b=this.get("hours");return null==a?b:this.add(a-b,"h")},day:function(a){var b=this.get("day");return null==a?b:this.add(a-b,"d")},date:function(a){var b=this.get("date");if(null==a)return b;var c=Math.min(this.date(),k(this.year(),a)),d=c-b;return d>=0?this._d.setDate(a):this.endOf("month").add(d,"d"),this},week:function(a,b){var c=h(this,this._d,b);return null==a?c:this.add(7*(a-c),"d")},weekday:function(a){var b=i(this,this._d);return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},dayOfYear:function(a){var b=j(this,this._d);return null==a?b:this.add(a-b,"d")},month:function(a){if(null==a)return this.get("month");var b=Math.min(this.date(),k(this.year(),a));return this._d.setMonth(a,b),this},year:function(a){var b=this.get("year");return null==a?b:this.add(a-b,"y")},toDate:function(){return this._d},yesterday:function(){return this.sub(1,"d").startOf("day")},today:function(){return this.startOf("day")},tomorrow:function(){return this.add(1,"d").startOf("day")},utc:function(){return this._utcMode=!0,this},isUTC:function(){return this._utcMode},local:function(){return this._utcMode=!1,this},clone:function(){return new r(this._d)},lang:function(a,b){return a&&y[a]?(this._lang=a,y[a]):a&&!y[a]&&b?(this._lang=a,void(y[a]=b)):y[this._lang]||y.en}},c(r,{now:function(){return new r},unix:function(a){return new r(1e3*a)},yesterday:function(){return(new r).yesterday()},today:function(){return(new r).today()},tomorrow:function(){return(new r).tomorrow()},utc:function(a,b){return(new r).utc().parse(a,b)},lang:function(a,b){if(!y[a]&&b)y[a]=b,x._lang=a;else if(y[a]||b)x._lang=a;else try{require("../lang/"+a)}catch(c){}return x._lang}}),t?module.exports=r:"function"==typeof define&&define.amd&&define("charon",function(){return r})}).call(this);