!function(undefined){function extend(target,source){for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key]);return target}function absRound(v){return Math.abs(Math.round(v))}function pad(value,length,character){return value=new String(value),character==undefined&&(character="0"),new Array(length-value.length+1).join(character)+value}function padRight(value,length,character){return value=new String(value),character==undefined&&(character="0"),value+new Array(length-value.length+1).join(character)}function getWeek(crn,date,absolute){var yearStart,week,day;return absolute||(absolute=!1),date=new Date(date),date.setHours(0,0,0),day=0===crn.lang.week.weekStart?date.getDay():date.getDay()||7,absolute?(yearStart=new Date(date.getFullYear(),0,1),date.setDate(date.getDate()+crn.lang.week.yearStart-day),week=Math.floor((date-yearStart+1)/6048e5)):(date.setDate(date.getDate()+crn.lang.week.yearStart-day),yearStart=new Date(date.getFullYear(),0,1),week=Math.ceil((date-yearStart+1)/6048e5)),week}function getWeekday(crn,date){return(date.getDay()+7-crn.lang.week.weekStart)%7}function getDayOfYear(crn,date){var day=date.getDate(),year=date.getFullYear(),fd=new Date(year,0,1,12,0,0),ld=new Date(year,date.getMonth(),day,12,0,0);return Math.round((ld-fd)/864e5)+1}function parseDateInput(crn,input,format){return input instanceof Date?new Date(input):input instanceof charon?new Date(input.toDate()):"string"==typeof input?parseDateString(crn,input,format):"number"==typeof input?new Date(input):new Date}function parseDateString(crn,string,format){var formats,date,key,units={S:"Milliseconds",s:"Seconds",m:"Minutes",H:"Hours",h:"Hours",D:"Date",M:"Month",Y:"FullYear"},regs={Z:"(\\+|-)[0-9:]{4,5}",ZZ:"(\\+|-)[0-9:]{4,5}"};if("undefined"==typeof format){formats=["{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}{ZZ}","{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}{Z}","{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}","{YYYY}-{MM}-{DD} {hh}:{mm}:{ss}"];for(key in formats)if(date=parseDateString(crn,string,formats[key]))return date;if(date=new Date(Date.parse(string)))return new Date(date.getTime()+1e3*60*date.getTimezoneOffset())}date=new Date;var remainder,chars,reg,tag,rm,matches=format.match(/{\w+}/g),position=0,offset=null;if(!matches)return null;for(key in matches){if(tag=matches[key],chars=tag.match(/\w+/)[0],remainder=string.substr(position),reg=new RegExp(regs[chars]||"\\d+"),rm=remainder.match(reg),!rm)return null;if(value=remainder.match(reg)[0],position+=remainder.indexOf(value)+String(value).length,"Z"==chars[0]&&(offset=parseInt(value.match(/\d+/g).join("")),offset=60*parseInt(parseInt(offset,10)/100,10)+(parseInt(offset,10)/100-parseInt(parseInt(offset,10)/100,10)),offset="-"==value[0]?-offset:offset),"undefined"!=typeof units[chars[0]]){var method="set"+units[chars[0]];"setMonth"==method&&value--,date[method](value)}}return null!==offset?new Date(date.getTime()-(1e3*60*date.getTimezoneOffset()+1e3*60*offset)):crn.utcMode?new Date(date.getTime()-1e3*60*date.getTimezoneOffset()):date}function charon(date,format){return this._d=parseDateInput(this,date,format),this}var hasModule="undefined"!=typeof module&&module.exports;charon.prototype={_d:null,utcMode:!1,maxDiff:2592e3,msfactor:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},unitAliases:{ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",Y:"year"},lang:{relativeTime:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"just now",minute:"{prefix} [a minute] {suffix}",minutes:"{prefix} {diff} [minutes] {suffix}",hour:"{prefix} [hour] {suffix}",hours:"{prefix} {diff} [hours] {suffix}",day:"{prefix} [a day] {suffix}",days:"{prefix} {diff} [days] {suffix}",month:"{prefix} [a month] {suffix}",months:"{prefix} [months] {diff}",year:"{prefix} [a year] {suffix}",years:"{prefix} {diff} [years] {suffix}",wordDelimiter:" ",format:"{D} {MMMM} {YYYY}"},pluralizer:function(number){return 1==number?0:1},calendar:{sameElse:"{D} {MMMM} {YYYY}",sameDay:"Today at {hh}:{mm}",nextDay:"Tomorrow at {hh}:{mm}",nextWeek:"{wwww} at {hh}:{mm}",lastDay:"Yesterday at {hh}:{mm}",lastWeek:"Last {wwww} at {hh}:{mm}"},week:{weekStart:0,yearStart:4},weekdays:function(day,format,brief){brief||(brief=!1);var weekdays={nominative:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Satruday","Sunday"],accusative:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Satruday","Sunday"],brief:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};return brief?weekdays.brief[day]:weekdays.nominative[day]},months:function(month,format,brief){brief||(brief=!1);var months={nominative:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],accusative:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],brief:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};return brief?months.brief[month]:months.nominative[month]}},fromNow:function(then){then="undefined"==typeof then?new Date:parseDateInput(this,then);var diff=this.diff(then,"all"),r=diff.relative,l=this.lang.relativeTime,negative=diff.strict.s<0?!0:!1;return r.s<this.maxDiff?r.s<45&&this.humanize(l.seconds,r.s,negative)||r.s<90&&this.humanize(l.minute,1,negative)||r.i<45&&this.humanize(l.minutes,r.i,negative)||r.i<90&&this.humanize(l.hour,1,negative)||r.h<24&&this.humanize(l.hours,r.h,negative)||r.h<42&&this.humanize(l.day,1,negative)||r.d<30&&this.humanize(l.days,r.d,negative)||r.d<365&&this.humanize(l.year,1,negative)||r.y<1.5&&this.humanize(l.years,r.y,negative)||this.humanize(l.years,r.y,negative):this.format(l.format)},diff:function(date,unit,absolute){"undefined"==typeof absolute&&(absolute=!0);var then=parseDateInput(this,date),diff=(this._d.getTime()-then.getTime())/1e3,output=diff,s=diff,i=s/60,h=i/60,d=h/24;switch(unit){case"seconds":output=s;break;case"minutes":output=s/60;break;case"hours":output=i/60;break;case"days":output=h/24;break;case"months":output=d/30;break;case"years":output=d/365;break;case"all":return{relative:{s:absRound(diff),i:absRound(s/60),h:absRound(i/60),d:absRound(h/24),m:absRound(d/30),y:absRound(d/365)},strict:{s:diff,i:s/60,h:i/60,d:h/24,m:d/30,y:d/365}};default:output=s}return absolute?Math.abs(Math.round(output)):output},humanize:function(string,n,negative){l=this.lang.relativeTime,string=this.choice(string,n);var prefix=negative?l.prefixAgo:l.prefixFromNow,suffix=negative?l.suffixAgo:l.suffixFromNow,replacement=this.format(string.replace(/{diff}/i,n).replace(/{prefix}/i,prefix||"").replace(/{suffix}/i,suffix||""));return replacement.replace(/^\s+|\s+$/g,"")},choice:function(string,n){var matches=string.match(/\[(.+)\]/);if(!matches)return string;var words=matches[1].split("|"),word=words.length>1?words[this.lang.pluralizer(n)]:words[0];return string=string.replace(matches[0],word)},format:function(format,date){format||(format="{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}{Z}"),date||(date=this._d),this.utcMode&&(date=new charon(date).add("ms",1e3*60*this._d.getTimezoneOffset()).toDate());var milliseconds=date.getMilliseconds(),seconds=date.getSeconds(),minutes=date.getMinutes(),hours=date.getHours(),weekday=getWeekday(this,date),dayOfYear=String(this.dayOfYear()),day=String(date.getDate()),week=String(getWeek(this,date)),weekFull=String(getWeek(this,date,!0)),month=String(date.getMonth()+1),year=String(date.getFullYear()),offset=this.utcMode?0:date.getTimezoneOffset(),meridiem=hours>11?"PM":"AM",hoursAMPM=hours>11?"0"+hours%12:"0"+hours;hoursAMPM=String(0===hoursAMPM?12:hoursAMPM);var timezone=offset>0?"-":"+";timezone+=Math.abs(offset)<6e3?"0":"",timezone=padRight(timezone+Math.abs(offset/60),5);var ch,reg,l=this.lang,chars={S:milliseconds,SS:pad(milliseconds,3),s:seconds,ss:pad(seconds,2),m:minutes,mm:pad(minutes,2),H:hoursAMPM,HH:hoursAMPM.slice(hoursAMPM.length-2),h:hours,hh:pad(hours,2),a:meridiem.toLowerCase(),A:meridiem,D:day,DD:pad(day,2),DDD:dayOfYear,DDDD:pad(dayOfYear,3),M:month,MM:pad(month,2),MMM:l.months(month,format,!0),MMMM:l.months(month,format),w:weekday,ww:pad(weekday,2),www:l.weekdays(weekday,format,!0),wwww:l.weekdays(weekday,format),W:week,WW:pad(week,2),WWW:weekFull,WWWW:pad(weekFull,2),Y:parseInt(year.substring(2),10),YY:year.substring(2),YYYY:year,Z:[timezone.slice(0,3),":",timezone.slice(3)].join(""),ZZ:timezone};for(var key in chars)ch=chars[key],reg=new RegExp("{"+key+"}","g"),"function"==typeof format&&(format=format(ch)||format),"string"==typeof format&&(format=format.replace(reg,ch));return format},calendar:function(){var diff=this.diff((new charon).startOf("day"),"days",!1),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.lang.calendar[format])},startOf:function(units){switch(units){case"year":this._d.setMonth(0);case"month":this._d.setDate(1);case"week":case"day":this._d.setHours(0);case"hour":this._d.setMinutes(0);case"minute":this._d.setSeconds(0);case"second":this._d.setMilliseconds(0)}return"week"===units&&this.weekday(0),this},endOf:function(units){return this.startOf(units).add(units,1).sub("millisecond",1)},add:function(units,amount){return this._d.setMilliseconds(this._d.getMilliseconds()+this.duration(units,amount)),this},sub:function(units,amount){return this._d.setMilliseconds(this._d.getMilliseconds()-this.duration(units,amount)),this},duration:function(units,amount){return amount*(this.msfactor[units]||this.msfactor[this.unitAliases[units]])},isValid:function(){return!!this._d},parse:function(input,format){return this._d=parseDateInput(this,input,format),this},now:function(){return this._d=new Date,this},timestamp:function(input){var timestamp=this._d.getTime();return null==input?timestamp:this.add("millisecond",input-timestamp)},unix:function(input){return null==input?Math.floor(this.timestamp()/1e3):this.timestamp(1e3*input)},milliseconds:function(input){var ms=this._d.getMilliseconds();return null==input?ms:this.add("millisecond",input-ms)},ms:function(input){return this.milliseconds(input)},seconds:function(input){var seconds=this._d.getSeconds();return null==input?seconds:this.add("second",input-seconds)},minutes:function(input){var minutes=this._d.getMinutes();return null==input?minutes:this.add("minute",input-minutes)},hours:function(input){var hours=this._d.getHours();return null==input?hours:this.add("hour",input-hours)},day:function(input){var day=this._d.getDay();return null==input?day:this.add("day",input-day)},date:function(input){var date=this._d.getDate();if(null==input)return date;var daysInMonth=Math.min(this.date(),daysInMonth(this.year(),input)),diff=daysInMonth-date;return diff>=0?this._d.setDate(input):this.endOf("month").add("day",diff),this},week:function(input,absolute){var week=getWeek(this,this._d,absolute);return null==input?week:this.add("day",7*(input-week))},weekday:function(input){var weekday=getWeekday(this,this._d);return null==input?weekday:this.add("day",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},dayOfYear:function(input){var day=getDayOfYear(this,this._d);return null==input?day:this.add("day",input-day)},month:function(input){var dayOfMonth;return null==input?this._d.getMonth():(dayOfMonth=Math.min(this.date(),daysInMonth(this.year(),input)),this._d.setMonth(input,dayOfMonth),this)},year:function(input){var year=this._d.getFullYear();return null==input?year:this.add("year",input-year)},toDate:function(){return this._d},utc:function(){return this.utcMode=!0,this},clone:function(){return new charon(this._d)}},extend(charon,{now:function(){return new charon},yesterday:function(){return(new charon).sub("day",1).startOf("day")},today:function(){return(new charon).startOf("day")},tomorrow:function(){return(new charon).add("day",1).startOf("day")},utc:function(input){return(new charon).utc().parse(input)}}),hasModule?module.exports=charon:"function"==typeof define&&define.amd&&define("charon",function(){return charon})}.call(this);