/**
 * Simple javascript Date manipulation, parsing and printing library.
 * version 0.2.0
 * Kane Cohen [KaneCohen@gmail.com] | https://github.com/KaneCohen
 * @preserve
 */
(function(a){"use strict";function b(a){return a.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"")}function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a){return Math.abs(Math.round(a))}function e(b,c,d){var e=new String(b);for(d==a&&(d="0");e.length<c;)e=d+e;return e}function f(b,c,d){var e=new String(b);for(d==a&&(d="0");e.length<c;)e+=d;return e}function g(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function h(a,b,c){var d,e,f;return c||(c=!1),b=new Date(b),b.setHours(0,0,0),f=0===a.lang.week.weekStart?b.getDay():b.getDay()||7,c?(d=new Date(b.getFullYear(),0,1),b.setDate(b.getDate()+a.lang.week.yearStart-f),e=Math.floor((b-d+1)/6048e5)):(b.setDate(b.getDate()+a.lang.week.yearStart-f),d=new Date(b.getFullYear(),0,1),e=Math.ceil((b-d+1)/6048e5)),e}function i(a,b){return(b.getDay()+7-a.lang.week.weekStart)%7}function j(a,b){var c=b.getDate(),d=b.getFullYear(),e=new Date(d,0,1,12,0,0),f=new Date(d,b.getMonth(),c,12,0,0);return Math.round((f-e)/864e5)+1}function k(a,b){return new Date(b,a,0).getDate()}function l(a,b,c){return b instanceof Date?new Date(b):b instanceof r?new Date(b.toDate()):"string"==typeof b?q(a,b,c):"number"==typeof b?new Date(b):new Date}function m(a){var b=a.match(v),c={format:[],regex:[],groups:[]};return b&&b.forEach(function(a,b){a=/\w+/.exec(a)[0],c.format[b]=a,c.regex[b]=B[a],c.groups[b]=u[a[0]]||null}),c}function n(a,b){var c,d=w.exec(b),e="",f=d.length;if(d[0]){for(c=0,f=x.dates.length;f>c;c++)if(x.dates[c][1].exec(b)){e=x.dates[c][0]+(d[6]||" ");break}for(c=0,f=x.times.length;f>c;c++)if(x.times[c][1].exec(b)){e+=x.times[c][0];break}}return b.match(y)&&(e+="{Z}"),o(a,b,e)}function o(a,b,c){var d=m(c);return p(a,b,d)}function p(a,b,c){var d,e,f,h,i,j,k=0,l=null,m=new Date;if(!c.format)return null;g(m);for(j in c.format)d=b.substr(k),h=d.match(c.regex[j]),h&&(f=h[0],e="set"+c.groups[j],k+=d.indexOf(f)+String(f).length,"setTimezone"==e?(i=f.match(z),l=60*i[1]*60+60*i[2],l="-"==i[0]?-l:l):("setMonth"==e&&f--,m[e](f)));return null!==l?new Date(m.getTime()-(60*m.getTimezoneOffset()*1e3+60*l*1e3)):a.utcMode?new Date(m.getTime()-60*m.getTimezoneOffset()*1e3):m}function q(a,b,c){return"undefined"==typeof c?n(a,b):o(a,b,c)}function r(a,b){c(this,t),this._d=l(this,a,b)}var s="undefined"!=typeof module&&module.exports,t=(60*(new Date).getTimezoneOffset()*1e3,{_d:null,utcMode:!1,maxDiff:2592e3,msfactor:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},unitAliases:{ms:"millisecond",milliseconds:"millisecond",seconds:"second",s:"second",minutes:"minute",m:"minute",hours:"hours",h:"hour",days:"day",d:"day",weeks:"week",w:"week",months:"month",M:"month",years:"year",y:"year",Y:"year"},lang:{relativeTime:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"just now",minute:"{prefix} [a minute] {suffix}",minutes:"{prefix} {diff} [minutes] {suffix}",hour:"{prefix} [an hour] {suffix}",hours:"{prefix} {diff} [hours] {suffix}",day:"{prefix} [a day] {suffix}",days:"{prefix} {diff} [days] {suffix}",month:"{prefix} [a month] {suffix}",months:"{prefix} [months] {diff}",year:"{prefix} [a year] {suffix}",years:"{prefix} {diff} [years] {suffix}",wordDelimiter:" ",format:function(a,b){return a.year()===b.year()?"{D} {MMMM}":"{D} {MMMM} {YYYY}"}},pluralizer:function(a){return 1==a?0:1},calendar:{sameElse:"{D} {MMMM} {YYYY}",sameDay:"Today at {hh}:{mm}",nextDay:"Tomorrow at {hh}:{mm}",nextWeek:"{wwww} at {hh}:{mm}",lastDay:"Yesterday at {hh}:{mm}",lastWeek:"Last {wwww} at {hh}:{mm}"},week:{weekStart:0,yearStart:4},weekdays:function(a,b,c){c||(c=!1);var d={nominative:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Satruday","Sunday"],accusative:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Satruday","Sunday"],brief:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};return c?d.brief[a]:d.nominative[a]},months:function(a,b,c){c||(c=!1);var d={nominative:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],accusative:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],brief:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};return c?d.brief[a]:d.nominative[a]}}}),u={S:"Milliseconds",s:"Seconds",m:"Minutes",H:"Hours",h:"Hours",D:"Date",M:"Month",Y:"FullYear",Z:"Timezone"},v=/{(\w+)}/gi,w=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,x={dates:[["{YYYY}-{MM}-{DD}",/\d{4}-\d{2}-\d{2}/],["{YYYY}-{DDD}",/\d{4}-\d{3}/]],times:[["{HH}:{mm}:{ss}",/(T| )\d\d:\d\d:\d\d/],["{HH}:{mm}",/(T| )\d\d:\d\d/],["{HH}",/(T| )\d\d/]]},y=/Z|[\+\-]\d\d:?\d\d/gi,z=/([\+\-]|\d\d)/gi,A="[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}",B={S:/\d{1,3}/,SS:/\d{3}/,s:/\d{1,2}/,ss:/\d{2}/,m:/\d{1,2}/,mm:/\d{2}/,H:/\d{1,2}/,HH:/\d{2}/,h:/\d{1,2}/,hh:/\d{2}/,a:/am|pm/,A:/AM|PM/,D:/\d{1,2}/,DD:/\d{2}/,DDD:/\d{1,3}/,DDDD:/\d{3}/,M:/\d{1,2}/,MM:/\d{2}/,MMM:/\w{2}/,MMMM:A,w:/\d{1}/,ww:/\d{2}/,www:A,wwww:A,W:/\d{1,2}/,WW:/\d{2}/,WWW:/\d{1,2}/,WWWW:/\d{2}/,Y:/\d{2}/,YY:/\d{2}/,YYYY:/\d{4}/,Z:/Z|[\+\-]\d\d:?\d\d/,ZZ:/Z|[\+\-]\d\d:?\d\d/};r.prototype={fromNow:function(a,b){a="undefined"==typeof a?new r:new r(a);var c=this.diff(a,"all"),d=c.relative,e=this.lang.relativeTime,f=c.strict.s<0?!0:!1;return d.s<this.maxDiff?d.s<45&&this.humanize(e.seconds,d.s,f)||d.s<90&&this.humanize(e.minute,1,f)||d.i<45&&this.humanize(e.minutes,d.i,f)||d.i<90&&this.humanize(e.hour,1,f)||d.h<24&&this.humanize(e.hours,d.h,f)||d.h<42&&this.humanize(e.day,1,f)||d.d<31&&this.humanize(e.days,d.d,f)||d.m<12&&this.humanize(e.months,d.m,f)||d.y<1.5&&this.humanize(e.year,d.y,f)||d.y>1.5&&this.humanize(e.years,d.y,f)||this.humanize(e.years,d.y,f):(b||(b=e.format),"function"==typeof b&&(b=b(this,a)),this.format(b))},diff:function(a,b,c){"undefined"==typeof c&&(c=!0);var e=l(this,a),f=(this._d.getTime()-e.getTime())/1e3,g=f,h=f,i=h/60,j=i/60,k=j/24;switch(b){case"seconds":g=h;break;case"minutes":g=h/60;break;case"hours":g=i/60;break;case"days":g=j/24;break;case"months":g=k/30;break;case"years":g=k/365;break;case"all":return{relative:{s:d(f),i:d(h/60),h:d(i/60),d:d(j/24),m:d(k/30),y:d(k/365)},strict:{s:f,i:h/60,h:i/60,d:j/24,m:k/30,y:k/365}};default:g=h}return c?Math.abs(Math.round(g)):g},humanize:function(a,c,d){var e=this.lang.relativeTime;a=this.choice(a,c);var f=d?e.prefixAgo:e.prefixFromNow,g=d?e.suffixAgo:e.suffixFromNow,h=this.format(a.replace(/{diff}/i,c).replace(/{prefix}/i,f||"").replace(/{suffix}/i,g||""));return b(h)},choice:function(a,b){var c=a.match(/\[(.+)\]/);if(!c)return a;var d=c[1].split("|"),e=d.length>1?d[this.lang.pluralizer(b)]:d[0];return a=a.replace(c[0],e)},format:function(a,b){var c=this;a||(a="{YYYY}-{MM}-{DD}T{hh}:{mm}:{ss}{Z}");var d=a;b||(b=this._d),this.utcMode&&(b=r.utc(b).toDate());var g=this.lang,j=a.match(v);if(j){j.forEach(function(j){var k,l,m=/\w+/.exec(j)[0];if("Z"===m[0]){var n=c.utcMode?0:b.getTimezoneOffset(),o=n>0?"-":"+";o+=Math.abs(n)<6e3?"0":"",o=f(o+Math.abs(n/60),5)}var p;switch(m){case"S":case"SS":p=b.getMilliseconds();break;case"s":case"ss":p=b.getSeconds();break;case"m":case"mm":p=b.getMinutes();break;case"H":case"HH":var q=b.getHours(),r=q>11?q%12:q;p=String(0===r?12:r);break;case"h":case"hh":p=b.getHours();break;case"a":p=b.getHours()>11?"pm":"am";break;case"A":p=b.getHours()>11?"PM":"AM";break;case"D":case"DD":p=String(b.getDate());break;case"DDD":case"DDDD":p=String(c.dayOfYear());break;case"M":case"MM":p=String(b.getMonth()+1);break;case"MMM":p=g.months(b.getMonth()+1,a,!0);break;case"MMMM":p=g.months(b.getMonth()+1,a);break;case"w":case"ww":p=i(c,b);break;case"www":p=g.weekdays(weekday,a,!0);break;case"wwww":p=g.weekdays(weekday,a);break;case"W":case"WW":p=String(h(c,b));break;case"WWW":case"WWWW":p=String(h(c,b,!0));break;case"Y":case"YY":p=String(b.getFullYear()).substring(2);break;case"YYYY":p=String(b.getFullYear());break;case"Z":p=[o.slice(0,3),":",o.slice(3)].join("");break;case"ZZ":p=o}switch(m){case"SS":case"DDDD":p=e(p,3);break;case"ss":case"mm":case"HH":case"hh":case"DD":case"MM":case"ww":case"WW":case"WWW":p=e(p,2)}"function"==typeof a&&(a=a(p)||a),"string"==typeof a&&(k=d.slice(0,d.indexOf(j)),l=d.slice(d.indexOf(j)+j.length),d=k+p+l)})}return d},calendar:function(){var a=this.diff((new r).startOf("day"),"days",!1),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang.calendar[b])},startOf:function(a){switch(a){case"year":this._d.setMonth(0);case"month":this._d.setDate(1);case"week":case"day":this._d.setHours(0);case"hour":this._d.setMinutes(0);case"minute":this._d.setSeconds(0);case"second":this._d.setMilliseconds(0)}return"week"===a&&this.weekday(0),this},endOf:function(a){return this.startOf(a).add(1,a).sub(1,"ms")},add:function(a,b){return this._d.setMilliseconds(this._d.getMilliseconds()+this.duration(a,b)),this},sub:function(a,b){return this._d.setMilliseconds(this._d.getMilliseconds()-this.duration(a,b)),this},duration:function(a,b){return b||(b="ms"),a*(this.msfactor[b]||this.msfactor[this.unitAliases[b]])},isValid:function(){return!!this._d},parse:function(a,b){return this._d=l(this,a,b),this},now:function(){return this._d=new Date,this},timestamp:function(a){var b=this._d.getTime();return null==a?b:this.add(a-b,"ms")},unix:function(a){return null==a?Math.floor(this.timestamp()/1e3):this.timestamp(1e3*a)},milliseconds:function(a){var b=this._d.getMilliseconds();return null==a?b:this.add(a-b,"ms")},ms:function(a){return this.milliseconds(a)},seconds:function(a){var b=this._d.getSeconds();return null==a?b:this.add(a-b,"s")},minutes:function(a){var b=this._d.getMinutes();return null==a?b:this.add(a-b,"m")},hours:function(a){var b=this._d.getHours();return null==a?b:this.add(a-b,"h")},day:function(a){var b=this._d.getDay();return null==a?b:this.add(a-b,"d")},date:function(a){var b=this._d.getDate();if(null==a)return b;var c=Math.min(this.date(),k(this.year(),a)),d=c-b;return d>=0?this._d.setDate(a):this.endOf("month").add(d,"d"),this},week:function(a,b){var c=h(this,this._d,b);return null==a?c:this.add(7*(a-c),"d")},weekday:function(a){var b=i(this,this._d);return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},dayOfYear:function(a){var b=j(this,this._d);return null==a?b:this.add(a-b,"d")},month:function(a){var b;return null==a?this._d.getMonth():(b=Math.min(this.date(),k(this.year(),a)),this._d.setMonth(a,b),this)},year:function(a){var b=this._d.getFullYear();return null==a?b:this.add(a-b,"y")},toDate:function(){return this._d},yesterday:function(){return this.sub(1,"d").startOf("day")},today:function(){return this.startOf("day")},tomorrow:function(){return this.add(1,"d").startOf("day")},utc:function(){return this.utcMode=!0,this},local:function(){return this.utcMode=!1,this},clone:function(){return new r(this._d)}},c(r,{now:function(){return new r},yesterday:function(){return(new r).yesterday()},today:function(){return(new r).today()},tomorrow:function(){return(new r).tomorrow()},utc:function(a,b){return(new r).utc().parse(a,b)}}),s?module.exports=r:"function"==typeof define&&define.amd&&define("charon",function(){return r})}).call(this);